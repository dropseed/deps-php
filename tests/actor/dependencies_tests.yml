name: actor-php-composer
type: actor

cases:
- name: Basic lockfile test
  dockerfile: Dockerfile
  repo_contents: tests/actor/basic/repo_base
  input_dependencies_json: tests/actor/basic/input.json
  output_dependencies_json: tests/actor/basic/output.json

- name: Subdirectory test
  dockerfile: Dockerfile
  repo_contents: tests/actor/subdirectory/repo_base
  input_dependencies_json: tests/actor/subdirectory/input.json
  output_dependencies_json: tests/actor/subdirectory/output.json
  # tests:
  #   - |
  #       git checkout monolog/monolog-1.23.0-0 && \
  #       diff -x '.git' -x 'vendor' ${CWD}/tests/actor/subdirectory/repo_final_monolog/ ./
  #   - |
  #       git checkout ramsey/uuid-3.6.1-0 && \
  #       diff -x '.git' -x 'vendor' ${CWD}/tests/actor/subdirectory/repo_final_uuid/ ./
  user_config:
    settings:
      pr_labels:
      - testing

- name: No composer.lock test
  dockerfile: Dockerfile
  repo_contents: tests/actor/no_lockfile/repo_base
  input_dependencies_json: tests/actor/no_lockfile/input.json
  output_dependencies_json: tests/actor/no_lockfile/output.json
  # tests:
  #   - |
  #       git checkout monolog/monolog-1.23.0-0 && \
  #       diff -x '.git' -x 'vendor' ${CWD}/tests/actor/no_lockfile/repo_final_monolog/ ./
  #   - |
  #       git checkout ramsey/uuid-3.6.1-0 && \
  #       diff -x '.git' -x 'vendor' ${CWD}/tests/actor/no_lockfile/repo_final_uuid/ ./
  user_config:
    settings:
      commit_message_prefix: "deps: "
      pr_labels:
      - testing
